<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æˆ‘å€‘çš„æ™‚å…‰</title>
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        :root {
            --primary-ink: #5e4b52; /* æ·±è¤å¢¨è‰² */
            --accent-pink: #eeb8c3; /* æ·¡ç²‰æ°´å¢¨ */
            --bg-paper: #f9f7f2; /* å®£ç´™è‰² */
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.9);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'KaiTi', 'STKaiti', 'SimSun', serif; /* å„ªå…ˆä½¿ç”¨æ¥·é«”ï¼Œç‡Ÿé€ æ°´å¢¨æ„Ÿ */
            background-color: var(--bg-paper);
            overflow: hidden; /* é˜²æ­¢æ»¾å‹•ï¼Œç‰¹æ•ˆå…¨å± */
            color: var(--primary-ink);
        }

        /* æ•¸å­—å­—é«” - ç‚ºäº†æ¸…æ™°åº¦ä½¿ç”¨ç„¡è¥¯ç·š */
        .num-font {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            font-weight: 300;
        }

        /* --- èƒŒæ™¯ç‰¹æ•ˆå±¤ --- */
        #canvas-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* --- ä¸»å®¹å™¨ --- */
        #app {
            position: relative;
            z-index: 10;
            height: 100%;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* éš±è—æ»¾å‹•æ¢ä½†å…è¨±æ»¾å‹• */
            scrollbar-width: none; 
        }
        #app::-webkit-scrollbar { display: none; }

        /* --- å¡ç‰‡é€šç”¨æ¨£å¼ --- */
        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
        }

        /* --- æ¨™é¡Œå€åŸŸ --- */
        .header-symbol {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: block;
            animation: float 3s ease-in-out infinite;
        }

        .names {
            font-size: 1.5rem;
            margin: 10px 0;
            font-weight: bold;
            cursor: pointer; /* æç¤ºå¯é»æ“Šä¿®æ”¹ */
        }

        .main-timer {
            margin: 20px 0;
        }

        .main-timer .label {
            font-size: 1rem;
            color: #888;
            margin-bottom: 5px;
        }

        .main-timer .count {
            font-size: 4rem;
            color: #d65a77; /* èƒ­è„‚ç´… */
            line-height: 1;
        }

        .sweet-prefix {
            font-size: 0.9rem;
            color: #d65a77;
            margin-top: 5px;
            font-weight: bold;
        }

        /* --- æ¯æ—¥ä¸€å¥ --- */
        .quote-card {
            position: relative;
        }

        .quote-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin: 15px 0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quote-tag {
            font-size: 0.7rem;
            color: #aaa;
            position: absolute;
            bottom: 10px;
            right: 15px;
            background: rgba(255,255,255,0.8);
            padding: 2px 6px;
            border-radius: 10px;
        }

        .mode-switch {
            position: absolute;
            top: 15px;
            right: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        /* ç‡Ÿé€ ç«ç„°å¾®å…‰çš„æ„Ÿè¦º */
        .mode-switch.active { 
            background: rgba(254, 242, 242, 0.8);
            border: 1px solid #f87171;
            color: #b91c1c;
            box-shadow: 0 0 10px rgba(248, 113, 113, 0.2);
        }
        /* --- ç´€å¿µæ—¥ --- */
        .event-card {
            text-align: left;
        }
        .event-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }
        .event-title { font-size: 1.2rem; font-weight: bold; }
        .event-days { font-size: 1.5rem; color: #d65a77; }
        .event-date-info { font-size: 0.85rem; color: #666; margin-top: 5px; }

        /* --- åº•éƒ¨æŒ‰éˆ• --- */
        .fab-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .fab {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            border: none;
            outline: none;
            transition: transform 0.2s;
        }
        .fab:active { transform: scale(0.9); }

        /* --- æ¨¡æ…‹æ¡† (Settings & List) --- */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            z-index: 200;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
            animation: fadeIn 0.3s;
        }

        .modal-content {
            max-width: 500px;
            margin: 50px auto;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: #666; }
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
            font-family: inherit;
        }
        .btn {
            width: 100%;
            padding: 12px;
            background: #eeb8c3;
            color: #5e4b52;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: bold;
        }

        .event-list-item {
            background: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .delete-btn { color: red; cursor: pointer; padding: 5px; }

        /* --- å‹•ç•« --- */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

    </style>
</head>
<body>

    <canvas id="canvas-bg"></canvas>

    <div id="app">
        <div class="card" id="main-card">
            <div class="header-symbol" id="display-symbol">ğŸ’‹</div>
            <div class="names" onclick="openSettings()">
                <span id="display-name1">æ‰¿è«¾</span> & <span id="display-name2">æ°¸æ†</span>
            </div>
            <div class="main-timer">
                <div class="label">æˆ‘å€‘å·²ç¶“åœ¨ä¸€èµ·</div>
                <div class="count num-font" id="days-count">0</div>
                <div class="label">å¤©</div>
                <div class="sweet-prefix" id="sweet-prefix-text"></div>
            </div>
        </div>

        <div class="card quote-card" onclick="refreshQuote()">
            <div class="mode-switch" id="mode-toggle">
                <span id="mode-icon">ğŸŒ¸</span>
                <span id="mode-text" style="font-size: 0.8rem; margin-left: 4px;">èŠ±è¦‹æ¨¡å¼</span>
            </div>
            <div class="quote-text" id="quote-text">
                é»æ“Šé€™è£¡é–‹å§‹æˆ‘å€‘çš„æ•…äº‹...
            </div>
            <div class="quote-tag" id="quote-tag">Sweet #01</div>
        </div>

        <div class="card event-card" id="next-event-card">
            <div class="event-header">
                <span class="event-title" id="next-event-name">è¼‰å…¥ä¸­...</span>
                <span class="event-days num-font" id="next-event-days">0</span>
            </div>
            <div class="event-date-info">
                ç›®æ¨™æ—¥æœŸ: <span id="next-event-date" class="num-font">--</span> <br>
                é‚„æœ‰ <span id="next-event-countdown" class="num-font">0</span> å¤©
            </div>
        </div>

    </div>

    <div class="fab-container">
        <button class="fab" onclick="openEventList()" title="ç´€å¿µæ—¥ç®¡ç†">ğŸ“…</button>
        <button class="fab" onclick="openSettings()" title="è¨­å®š">âš™ï¸</button>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <h2 style="text-align: center;">ğŸ’• è¨­å®šæˆ‘å€‘çš„æ„› ğŸ’•</h2>
            <div class="form-group">
                <label>ä½ çš„åå­—</label>
                <input type="text" id="input-name1" placeholder="åå­— A">
            </div>
            <div class="form-group">
                <label>å°è±¡çš„åå­—</label>
                <input type="text" id="input-name2" placeholder="åå­— B">
            </div>
            <div class="form-group">
                <label>åœ¨ä¸€èµ·çš„é‚£ä¸€å¤©</label>
                <input type="date" id="input-start-date">
            </div>
            <div class="form-group">
                <label>æ„›çš„ç¬¦è™Ÿ</label>
                <select id="input-symbol">
                    <option value="ğŸ’‹">ğŸ’‹ è¦ªå»</option>
                    <option value="â¤ï¸">â¤ï¸ æ„›å¿ƒ</option>
                    <option value="ğŸŒ¹">ğŸŒ¹ ç«ç‘°</option>
                    <option value="ğŸ’">ğŸ’ æˆ’æŒ‡</option>
                    <option value="ğŸ©">ğŸ© ç¾ç¾</option>
                    <option value="ğŸ§¸">ğŸ§¸ æ“æŠ±</option>
                </select>
            </div>
            <button class="btn" onclick="saveSettings()">ä¿å­˜ç”œèœœè¨­å®š</button>
            <div style="text-align: center; margin-top: 10px; color: #999; cursor: pointer;" onclick="closeModal('settings-modal')">å–æ¶ˆ</div>
        </div>
    </div>

    <div id="event-list-modal" class="modal">
        <div class="modal-content">
            <h2 style="text-align: center;">ğŸ“… ç´€å¿µæ—¥æ¸…å–®</h2>
            
            <div style="border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px;">
                <div class="form-group">
                    <label>ç´€å¿µæ—¥åç¨±</label>
                    <input type="text" id="new-event-name" placeholder="ä¾‹å¦‚ï¼šç¬¬ä¸€æ¬¡æ—…è¡Œ">
                </div>
                <div class="form-group">
                    <label>æ—¥æœŸ</label>
                    <input type="date" id="new-event-date">
                </div>
                <button class="btn" style="background-color: #b8eec3; color: #4b5e52;" onclick="addEvent()">æ·»åŠ ç´€å¿µæ—¥</button>
            </div>

            <div id="events-container">
                </div>
            
            <div style="text-align: center; margin-top: 20px; color: #999; cursor: pointer;" onclick="closeModal('event-list-modal')">é—œé–‰</div>
        </div>
    </div>

    <script>
        // --- æ•¸æ“šåº« ---
        const quotesSweet = [
            "æˆ‘ä¸å¤ªæœƒè¡¨é”æ„›ï¼Œä½†æˆ‘æ¯å¤©éƒ½åœ¨æƒ³ä½ ã€‚", "ä½ ä¸€å‡ºç¾ï¼Œæˆ‘çš„ä¸–ç•Œå°±è‡ªå‹•èª¿æˆæŸ”å…‰æ¨¡å¼ã€‚", "å–œæ­¡ä½ é€™ä»¶äº‹ï¼Œæˆ‘æ‰“ç®—æ…¢æ…¢ä¾†ï¼Œä¹…ä¸€é»ã€‚", "ä½ ä¸ç”¨å¤šå¥½ï¼Œä½ æ˜¯ä½ ï¼Œå°±å·²ç¶“å¾ˆå¥½ã€‚", "æˆ‘æƒ³æŠŠä»Šå¤©éå¥½ï¼Œå› ç‚ºè£¡é¢æœ‰ä½ ã€‚", "ä½ é è¿‘çš„æ™‚å€™ï¼Œæˆ‘é€£å‘¼å¸éƒ½è®Šå¾—æº«æŸ”ã€‚", "ä¸–ç•Œå¾ˆåµï¼Œä½†ä½ ä¸€èªªè©±ï¼Œæˆ‘å°±å®‰éœäº†ã€‚", "æˆ‘æœ€å–œæ­¡çš„é¢¨æ™¯ï¼Œæ˜¯ä½ ä¸ç¶“æ„çœ‹æˆ‘çš„æ™‚å€™ã€‚", "æœ‰ä½ åœ¨çš„åœ°æ–¹ï¼Œå°±ä¸åƒåœ¨è¶•è·¯ã€‚", "æˆ‘æƒ³é™ªä½ æŠŠå¹³å‡¡çš„æ—¥å­ï¼Œéæˆå€¼å¾—å›å‘³çš„é‚£ç¨®ã€‚", "ä½ ä¸€ç¬‘ï¼Œæˆ‘å°±çŸ¥é“ä»Šå¤©æœƒæ˜¯å¥½å¤©æ°£ã€‚", "æˆ‘ä¸æ˜¯å–œæ­¡ç†±é¬§ï¼Œæˆ‘æ˜¯å–œæ­¡æœ‰ä½ ã€‚", "ä½ ä¸ç”¨å®Œç¾ï¼Œæˆ‘å–œæ­¡çš„æœ¬ä¾†å°±æ˜¯çœŸå¯¦çš„ä½ ã€‚", "å¦‚æœç”Ÿæ´»å¾ˆç´¯ï¼Œé‚£æˆ‘æŠ±ä½ ä¸€ä¸‹ã€‚", "ä½ ä¸èªªè©±çš„æ™‚å€™ï¼Œä¹Ÿå¾ˆå¥½çœ‹ã€‚", "æˆ‘æƒ³æŠŠä½ å¯«é€²è¡Œç¨‹è¡¨ï¼Œå¤©å¤©éƒ½ä¸åˆªã€‚", "æœ‰äº›æº«æŸ”ï¼Œæˆ‘åªæƒ³ç•™çµ¦ä½ ã€‚", "ä½ è®“æˆ‘ç›¸ä¿¡ï¼Œå–œæ­¡ä¸€å€‹äººå¯ä»¥å¾ˆå®‰å¿ƒã€‚", "æˆ‘å–œæ­¡ä½ èµ°è·¯çš„æ¨£å­ï¼Œåƒæ…¢æ…¢èµ°é€²æˆ‘å¿ƒè£¡ã€‚", "ä½ åœ¨ï¼Œæˆ‘å°±ä¸æ€¥è‘—å»å“ªã€‚", "å¦‚æœä¸€å¤©åªèƒ½é¸ä¸€ä»¶é–‹å¿ƒçš„äº‹ï¼Œé‚£ä¸€å®šæ˜¯ä½ ã€‚", "ä½ å‡ºç¾åœ¨æˆ‘ç”Ÿæ´»è£¡ï¼Œæœ¬èº«å°±æ˜¯ç¦®ç‰©ã€‚", "æˆ‘å–œæ­¡ä½ ï¼Œæ˜¯é‚£ç¨®ä¸éœ€è¦è­‰æ˜çš„å–œæ­¡ã€‚", "ä½ ä¸åœ¨èº«é‚Šçš„æ™‚å€™ï¼Œæˆ‘ä¹Ÿåœ¨ç‚ºä½ é ç•™ä½ç½®ã€‚", "æˆ‘æƒ³é™ªä½ çœ‹å¾ˆå¤šæ¬¡æ—¥è½ï¼Œä¸ç”¨èªªè©±é‚£ç¨®ã€‚", "ä½ ä¸€é è¿‘ï¼Œæˆ‘å°±æƒ³æŠŠè²éŸ³æ”¾è¼•ã€‚", "æˆ‘ä¸æ˜¯ä¾è³´ä½ ï¼Œæˆ‘æ˜¯é¸æ“‡ä½ ã€‚", "ä½ è®“ã€Œæœªä¾†ã€é€™å€‹è©ï¼Œè®Šå¾—ä¸é‚£éº¼é™é ã€‚", "æˆ‘å–œæ­¡ä½ çš„å°ç¿’æ…£ï¼Œå‹éä»»ä½•é©šå–œã€‚", "ä½ ä¸ç”¨æ‡‚æˆ‘å…¨éƒ¨ï¼Œæˆ‘æœƒæ…¢æ…¢å‘Šè¨´ä½ ã€‚", "æœ‰ä½ åœ¨ï¼Œé€£ç­‰å¾…éƒ½è®Šå¾—å€¼å¾—ã€‚", "æˆ‘å–œæ­¡ä½ èªçœŸç”Ÿæ´»çš„æ¨£å­ï¼Œä¹Ÿå–œæ­¡ä½ å·æ‡¶çš„æ™‚å€™ã€‚", "ä½ ä¸€å‡ºç¾ï¼Œæˆ‘å°±å¿˜äº†åŸæœ¬åœ¨ç…©ä»€éº¼ã€‚", "æˆ‘æƒ³å’Œä½ ï¼ŒæŠŠæ—¥å­éæˆå½¼æ­¤çš„é å²¸ã€‚", "ä½ ä¸æ˜¯æˆ‘çš„å…¨éƒ¨ï¼Œä½†ä½ è®“ä¸€åˆ‡è®Šå®Œæ•´ã€‚", "æˆ‘é¡˜æ„ç‚ºä½ ï¼ŒæŠŠæ­¥èª¿æ”¾æ…¢ä¸€é»ã€‚", "ä½ ç¬‘çš„æ™‚å€™ï¼Œæˆ‘å¿ƒè£¡æœƒäº®ä¸€ä¸‹ã€‚", "æˆ‘å–œæ­¡ä½ å«æˆ‘åå­—çš„è²éŸ³ã€‚", "ä½ ä¸éœ€è¦ç‰¹åˆ¥åŠªåŠ›ï¼Œæˆ‘æœ¬ä¾†å°±ç«™åœ¨ä½ é€™é‚Šã€‚", "æˆ‘æƒ³ç•¶ä½ å›é ­æ™‚ï¼Œæ°¸é éƒ½åœ¨çš„é‚£å€‹äººã€‚", "å¦‚æœæ„›æœ‰å½¢ç‹€ï¼Œé‚£ä¸€å®šå¾ˆåƒä½ ã€‚", "ä½ è®“æˆ‘å­¸æœƒï¼Œæº«æŸ”ä¹Ÿæ˜¯ä¸€ç¨®åŠ›é‡ã€‚", "æˆ‘å–œæ­¡ä½ é è¿‘æ™‚ï¼Œç©ºæ°£è®Šæš–çš„æ„Ÿè¦ºã€‚", "ä½ åœ¨ï¼Œæˆ‘å°±ä¸æ€•ä¸–ç•Œå¤ªå¤§ã€‚", "æˆ‘æƒ³é™ªä½ ï¼Œèµ°éé‚£äº›ä¸ç¢ºå®šçš„æ—¥å­ã€‚", "ä½ ä¸ç”¨å•æˆ‘åœ¨ä¸åœ¨ï¼Œæˆ‘ä¸€ç›´éƒ½åœ¨ã€‚", "ä½ æ˜¯æˆ‘æ¯å¤©éƒ½æƒ³ç¢ºèªçš„é‚£å€‹å­˜åœ¨ã€‚", "æˆ‘å–œæ­¡ä½ è‡ªç„¶é éä¾†çš„æ¨£å­ã€‚", "ä½ è®“ã€Œå–œæ­¡ã€è®Šå¾—å¾ˆå®‰éœï¼Œä¹Ÿå¾ˆæ·±ã€‚", "æˆ‘é¡˜æ„æŠŠå¥½å¿ƒæƒ…ï¼Œåˆ†ä¸€åŠçµ¦ä½ ã€‚", "ä½ ä¸å¿…é–ƒé–ƒç™¼å…‰ï¼Œä½ ç…§äº®æˆ‘å°±å¤ äº†ã€‚", "æˆ‘å–œæ­¡å’Œä½ ä¸€èµ·ï¼Œä»€éº¼éƒ½ä¸åšã€‚", "ä½ ä¸€å‡ºç¾ï¼Œæ™‚é–“å°±ä¸å†é‚£éº¼åŒ†å¿™ã€‚", "æˆ‘æƒ³æˆç‚ºä½ ç”Ÿæ´»è£¡ï¼Œå¾ˆè‡ªç„¶çš„ä¸€éƒ¨åˆ†ã€‚", "ä½ ä¸ç”¨æ“”å¿ƒæœªä¾†ï¼Œæˆ‘æœƒé™ªä½ æƒ³ã€‚", "æˆ‘å–œæ­¡ä½ å¶çˆ¾çš„å°è¿·ç³Šã€‚", "æœ‰ä½ åœ¨ï¼Œæ—¥å­å°±ä¸æœƒå¤ªè–„ã€‚", "ä½ è®“æˆ‘é–‹å§‹æœŸå¾…æ˜å¤©ã€‚", "æˆ‘æƒ³æŠŠæº«æŸ”ï¼Œè®Šæˆä½ ç¿’ä»¥ç‚ºå¸¸çš„äº‹ã€‚", "ä½ é è‘—æˆ‘çš„æ™‚å€™ï¼Œæˆ‘è¦ºå¾—è‡ªå·±å¾ˆè¢«éœ€è¦ã€‚", "æˆ‘å–œæ­¡ä½ å°æˆ‘æ”¾å¿ƒçš„æ¨£å­ã€‚", "ä½ ä¸ç”¨å¤šèªªï¼Œæˆ‘æ‡‚ä½ çš„æ²‰é»˜ã€‚", "æˆ‘æƒ³è·Ÿä½ ä¸€èµ·ï¼ŒæŠŠæ—¥å¸¸éæˆæµªæ¼«ã€‚", "ä½ ä¸€å‡ºç¾ï¼Œæˆ‘å°±ä¸æƒ³å‡è£å …å¼·ã€‚", "æˆ‘å–œæ­¡ä½ é è¿‘æ™‚ï¼Œé‚£ç¨®å‰›å‰›å¥½çš„è·é›¢ã€‚", "æœ‰ä½ åœ¨ï¼Œä¸–ç•Œå°±ä¸æœƒå¤ªå†·ã€‚", "æˆ‘é¡˜æ„é™ªä½ ï¼Œæ…¢æ…¢è®Šè€ã€‚", "ä½ ä¸æ˜¯é¸é …ï¼Œä½ æ˜¯ç­”æ¡ˆã€‚", "æˆ‘å–œæ­¡ä½ çœ¼è£¡çš„æº«æŸ”ã€‚", "ä½ è®“æˆ‘æ‡‚å¾—ï¼Œå–œæ­¡ä¸ä¸€å®šè¦è½Ÿè½Ÿçƒˆçƒˆã€‚", "æˆ‘æƒ³ç•¶ä½ æœ€å®‰å¿ƒçš„èƒŒæ™¯ã€‚", "ä½ ä¸ç”¨æ’å¾—é‚£éº¼ç”¨åŠ›ï¼Œæˆ‘åœ¨ã€‚", "æˆ‘å–œæ­¡ä½ ç¬‘èµ·ä¾†ï¼Œä¸–ç•Œè·Ÿè‘—äº®ã€‚", "ä½ åœ¨çš„åœ°æ–¹ï¼Œå°±æ˜¯æˆ‘æƒ³å›å»çš„åœ°æ–¹ã€‚", "æˆ‘é¡˜æ„è½ä½ èªªæ‰€æœ‰å°äº‹ã€‚", "ä½ ä¸ç”¨å®Œç¾ï¼Œæˆ‘ä¹Ÿä¸æ˜¯ã€‚", "æˆ‘å–œæ­¡ä½ é¡˜æ„ä¾é æˆ‘çš„æ™‚å€™ã€‚", "æœ‰ä½ åœ¨ï¼Œé€£é›¨å¤©éƒ½ä¸è¨å­äº†ã€‚", "æˆ‘æƒ³å’Œä½ ï¼ŒæŠŠå¹³æ·¡éæˆæº«æŸ”ã€‚", "ä½ ä¸€å›é ­ï¼Œæˆ‘å°±çŸ¥é“è‡ªå·±æ²’èµ°éŒ¯æ–¹å‘ã€‚", "ä½ æ˜¯æˆ‘ç”Ÿæ´»è£¡ï¼Œæœ€å‰›å¥½çš„å­˜åœ¨ã€‚", "æˆ‘æƒ³é™ªä½ ï¼ŒæŠŠæ™‚é–“ç”¨åœ¨å½¼æ­¤èº«ä¸Šã€‚", "ä½ ä¸ç”¨é€å¼·ï¼Œæˆ‘å–œæ­¡ä½ æ”¾é¬†çš„æ¨£å­ã€‚", "æœ‰ä½ åœ¨ï¼Œæˆ‘ä¸æ€•æ…¢ã€‚", "æˆ‘æƒ³æˆç‚ºä½ æ¯å¤©éƒ½æƒ³è¦‹çš„äººã€‚", "ä½ ä¸€å‡ºç¾ï¼Œæˆ‘å°±ä¸æƒ³åˆ†å¿ƒã€‚", "æˆ‘å–œæ­¡ä½ è‡ªç„¶ç‰½éä¾†çš„æ‰‹ã€‚", "ä½ è®“ã€Œå›å®¶ã€è®Šå¾—æœ‰æ„ç¾©ã€‚", "æˆ‘é¡˜æ„ç‚ºä½ ï¼Œç•™ä½æº«æŸ”ã€‚", "æœ‰ä½ åœ¨ï¼Œå¿ƒå°±ä¸æ¼‚æ³Šã€‚"
        ];

        const quotesNaughty = [
            "å°å¦³çš„æ„›ï¼Œä¸åªæ˜¯èªªèªªè€Œå·²ï¼Œå› ç‚ºå‰©ä¸‹çš„æƒ³ç”¨è¡Œå‹•æ…¢æ…¢ä¾†ã€‚", "æˆ‘å°ä½ å¾ˆæ­£ç¶“ï¼Œæ­£ç¶“åˆ°ä¸å¤ªæƒ³æ”¾éä½ ã€‚", "ä½ ä¸€é è¿‘ï¼Œæˆ‘çš„ç†æ™ºå°±é–‹å§‹ä¸‹ç­ã€‚", "æˆ‘æƒ³ç•¶å€‹ç´³å£«ï¼Œä½†ä½ ä¸€çœ‹æˆ‘ï¼Œæˆ‘å°±æƒ³çŠ¯è¦ã€‚", "ä½ ä¸ç”¨æ’©ï¼Œæˆ‘è‡ªå·±æœƒäº‚æƒ³ã€‚", "æˆ‘å–œæ­¡ä½ çœ‹è‘—æˆ‘ï¼Œåˆå‡è£ä»€éº¼éƒ½æ²’æƒ³çš„æ¨£å­ã€‚", "æˆ‘ä¸æ˜¯å£ï¼Œæˆ‘åªæ˜¯å°ä½ æ²’ä»€éº¼æŠµæŠ—åŠ›ã€‚", "ä½ ä¸€ç¬‘ï¼Œæˆ‘å°±çŸ¥é“ä»Šæ™šæœƒä¸å¥½ç¡ã€‚", "æˆ‘å¾ˆæ­£ç¶“åœ°å–œæ­¡ä½ ï¼Œä¸æ­£ç¶“çš„æ˜¯å¾Œé¢é‚£äº›å¿µé ­ã€‚", "ä½ é éä¾†çš„æ™‚å€™ï¼Œæˆ‘é€£å‘¼å¸éƒ½ä¸å¤ªå–®ç´”ã€‚", "æˆ‘æƒ³æŠ±ä½ ï¼Œæ˜¯é‚£ç¨®ä¸å¤ªæƒ³æ”¾æ‰‹çš„ã€‚", "ä½ ä¸€é è¿‘ï¼Œæˆ‘å°±é–‹å§‹å£æ˜¯å¿ƒéã€‚", "æˆ‘ä¸æ˜¯æƒ³æ’©ä½ ï¼Œæˆ‘æ˜¯æƒ³è¦ä½ ã€‚", "ä½ ä¸ç”¨èªªè©±ï¼Œæˆ‘å°±çŸ¥é“ä½ åœ¨æƒ³ä»€éº¼ã€‚", "æˆ‘å¾ˆä¹–ï¼Œåªå°ä½ ä¸å¤ªä¹–ã€‚", "ä½ é€™æ¨£çœ‹æˆ‘ï¼Œæˆ‘å¾ˆé›£ç•¶å¥½äººã€‚", "æˆ‘å–œæ­¡ä½ é å¾—å¾ˆè¿‘ï¼Œè¿‘åˆ°æˆ‘æ²’è¾¦æ³•è£å†·éœã€‚", "ä½ ä¸€çšºçœ‰ï¼Œæˆ‘å°±æƒ³å“„ï¼›ä½ ä¸€é è¿‘ï¼Œæˆ‘å°±æƒ³æ›´å£ä¸€é»ã€‚", "æˆ‘æƒ³æŠŠä½ æŠ±ç·Šï¼Œåç¾©ä¸Šå«ä¿è­·ã€‚", "ä½ å°æˆ‘ä¾†èªªï¼Œæ˜¯é‚£ç¨®ä¸èƒ½å¤ªé è¿‘çš„å±éšªã€‚", "æˆ‘å°ä½ æ²’æœ‰é‡å¿ƒï¼Œåªæœ‰ä½”æœ‰æ…¾ã€‚", "ä½ ä¸€æ’’å¬Œï¼Œæˆ‘æ‰€æœ‰åŸå‰‡éƒ½è‡ªå‹•å–æ¶ˆã€‚", "æˆ‘ä¸æ˜¯æ•…æ„é é‚£éº¼è¿‘ï¼Œæ˜¯ä½ å¤ªå¥½æŠ±ã€‚", "ä½ ä¸ç”¨è©¦æ¢ï¼Œæˆ‘æœ¬ä¾†å°±å¾ˆæƒ³ã€‚", "æˆ‘æƒ³å°ä½ æº«æŸ”ï¼Œä¹Ÿæƒ³å°ä½ å¤±æ§ã€‚", "ä½ ä¸€é è¿‘ï¼Œæˆ‘å°±æƒ³æŠŠä¸–ç•ŒéœéŸ³ã€‚", "æˆ‘å–œæ­¡ä½ é‚£ç¨®ï¼Œæ˜æ˜çŸ¥é“å»ä¸èªªç ´çš„çœ¼ç¥ã€‚", "æˆ‘ä¸å¤ªæœƒæ’©äººï¼Œæˆ‘åªæœƒä¸€ç›´æƒ³ä½ ã€‚", "ä½ åœ¨æˆ‘æ‡·è£¡çš„æ™‚å€™ï¼Œæˆ‘æœ€ä¸åƒå€‹å¥½äººã€‚", "æˆ‘å–œæ­¡ä½ å°æˆ‘æ¯«ç„¡é˜²å‚™çš„æ¨£å­ã€‚", "æˆ‘æƒ³é è¿‘ä½ ï¼Œä¸åªæ˜¯ä¸€ä¸‹ã€‚", "ä½ ä¸€çœ‹æˆ‘ï¼Œæˆ‘å°±çŸ¥é“è‡ªå·±å®Œäº†ã€‚", "æˆ‘å°ä½ æ˜¯é‚£ç¨®ï¼Œæ…¢æ…¢ä¾†ä½†ä¸æ‰“ç®—åœçš„ã€‚", "ä½ ä¸ç”¨å‹•ï¼Œæˆ‘è‡ªå·±æœƒéå»ã€‚", "æˆ‘æƒ³æŠ±ä½ ä¹…ä¸€é»ï¼Œç†ç”±ä¹‹å¾Œå†èªªã€‚", "ä½ é€™æ¨£é è‘—ï¼Œæˆ‘æœƒæƒ³å¾ˆå¤šä¸è©²æƒ³çš„äº‹ã€‚", "æˆ‘å°ä½ ï¼Œä¸€å‘ä¸å¤ªå®ˆè¦çŸ©ã€‚", "ä½ ä¸ç”¨æé†’æˆ‘ï¼Œæˆ‘çŸ¥é“æˆ‘åœ¨æ’©ã€‚", "æˆ‘å¾ˆæº«æŸ”ï¼Œä½†åªå°ä½ å¤±æ§ã€‚", "ä½ ä¸€é è¿‘ï¼Œæˆ‘å°±å¿˜äº†ä»€éº¼å«ç•Œç·šã€‚", "æˆ‘ä¸æ˜¯æƒ³ä½”ä½ ä¾¿å®œï¼Œæˆ‘æ˜¯æƒ³ä½”ä½ ã€‚", "ä½ ä¸€ç¬‘ï¼Œæˆ‘å°±æƒ³æŠŠä½ å¸¶èµ°ã€‚", "æˆ‘å°ä½ ï¼Œæ˜¯é‚£ç¨®æœƒæ…¢æ…¢é€¼è¿‘çš„å–œæ­¡ã€‚", "ä½ é éä¾†çš„æ™‚å€™ï¼Œæˆ‘ä¸å¤ªæƒ³ç•¶å›å­ã€‚", "æˆ‘æƒ³è®“ä½ ç¿’æ…£æˆ‘ï¼Œç¿’æ…£åˆ°é›¢ä¸é–‹é‚£ç¨®ã€‚", "ä½ ä¸ç”¨èº²ï¼Œæˆ‘æ—©å°±çœ‹ä¸Šä½ äº†ã€‚", "æˆ‘å–œæ­¡ä½ çœ‹æˆ‘æ™‚ï¼Œé‚£ç¨®å¿ƒçŸ¥è‚šæ˜ã€‚", "æˆ‘ä¸æ˜¯æƒ³æ’©ä½ ï¼Œæˆ‘æ˜¯èªçœŸæƒ³è¦ä½ ã€‚", "ä½ é€™æ¨£çœ‹æˆ‘ï¼Œæˆ‘å¾ˆé›£ä¸é éå»ã€‚", "æˆ‘å°ä½ ï¼Œå‘ä¾†æ²’ä»€éº¼è‡ªåˆ¶åŠ›ã€‚"
        ];

        // --- å…¨å±€ç‹€æ…‹èˆ‡åˆå§‹åŒ– ---
        let appState = {
            name1: "è¦ªæ„›çš„",
            name2: "å¯¶å¯¶",
            startDate: new Date().toISOString().split('T')[0], // é»˜èªä»Šå¤©
            symbol: "ğŸ’‹",
            isNaughtyMode: false,
            events: [] // æ ¼å¼: { id: timestamp, name: string, date: "YYYY-MM-DD" }
        };

        // --- æœ¬åœ°å„²å­˜åŠŸèƒ½ ---
        function loadState() {
            const saved = localStorage.getItem('loveAppState');
            if (saved) {
                const parsed = JSON.parse(saved);
                // åˆä½µæ•¸æ“šé˜²æ­¢èˆŠç‰ˆæ•¸æ“šç¼ºå¤±å­—æ®µ
                appState = { ...appState, ...parsed };
                // ç¢ºä¿äº‹ä»¶æ˜¯æ•¸çµ„
                if(!Array.isArray(appState.events)) appState.events = [];
            }
        }

        function saveState() {
            localStorage.setItem('loveAppState', JSON.stringify(appState));
        }

        // --- æ ¸å¿ƒé‚è¼¯ï¼šæ—¥æœŸè¨ˆç®— ---
        const ONE_DAY = 1000 * 60 * 60 * 24;

        function updateMainTimer() {
            document.getElementById('display-name1').innerText = appState.name1;
            document.getElementById('display-name2').innerText = appState.name2;
            document.getElementById('display-symbol').innerText = appState.symbol;

            const start = new Date(appState.startDate);
            const now = new Date();
            // è¨­ç½®æ™‚é–“ç‚º 00:00:00 ä»¥é€²è¡Œç´”æ—¥æœŸæ¯”è¼ƒ
            start.setHours(0,0,0,0);
            now.setHours(0,0,0,0);

            const diffTime = now - start;
            const diffDays = Math.floor(diffTime / ONE_DAY);

            // ç¢ºä¿ä¸é¡¯ç¤ºè² æ•¸ï¼Œè‹¥æ˜¯æœªä¾†æ—¥æœŸå‰‡é¡¯ç¤º0
            const daysToShow = diffDays >= 0 ? diffDays : 0;
            document.getElementById('days-count').innerText = daysToShow;

            // ç”œèœœå‰ç¶´é‚è¼¯
            let prefix = "";
            if (diffDays >= 365) {
                const years = (diffDays / 365).toFixed(1);
                prefix = `å…±åº¦äº† ${years} å€‹æ˜¥å¤ç§‹å†¬`;
            } else if (diffDays >= 100) {
                prefix = "æˆ‘å€‘çš„æ„›éäº†ç™¾æ—¥å¤§é—œ";
            } else if (diffDays >= 30) {
                prefix = "ç”œèœœçš„ç¬¬ä¸€å€‹æœˆäº®";
            } else if (diffDays === 0) {
                prefix = "æ•…äº‹å¾ä»Šå¤©é–‹å§‹";
            } else {
                prefix = "æ¯ä¸€å¤©éƒ½å€¼å¾—ç´€å¿µ";
            }
            document.getElementById('sweet-prefix-text').innerText = prefix;
        }

        // --- æ ¸å¿ƒé‚è¼¯ï¼šæ¯æ—¥ä¸€å¥ ---
        function refreshQuote() {
            const list = appState.isNaughtyMode ? quotesNaughty : quotesSweet;
            const type = appState.isNaughtyMode ? "Secret" : "Sweet";
            
            const randomIndex = Math.floor(Math.random() * list.length);
            const quote = list[randomIndex];

            const textEl = document.getElementById('quote-text');
            const tagEl = document.getElementById('quote-tag');

            // ç°¡å–®æ·¡å…¥æ·¡å‡ºå‹•ç•«
            textEl.style.opacity = 0;
            setTimeout(() => {
                textEl.innerText = quote;
                tagEl.innerText = `${type} #${randomIndex + 1}`;
                textEl.style.opacity = 1;
            }, 300);
        }

        document.getElementById('mode-toggle').addEventListener('click', (e) => {
            e.stopPropagation(); 
            appState.isNaughtyMode = !appState.isNaughtyMode;
            
            const toggleBtn = document.getElementById('mode-toggle');
            const icon = document.getElementById('mode-icon');
            const text = document.getElementById('mode-text');

            if (appState.isNaughtyMode) {
                toggleBtn.classList.add('active');
                icon.innerText = "ğŸ”¥";
                text.innerText = "çƒˆç„°æ¨¡å¼"; // é€™æ˜¯æ­£å¼ä¸”å¸¶é»èª˜æƒ‘çš„åç¨±
            } else {
                toggleBtn.classList.remove('active');
                icon.innerText = "ğŸŒ¸";
                text.innerText = "èŠ±è¦‹æ¨¡å¼"; // è±¡å¾µç´”çœŸã€æº«æŸ”çš„é™ªä¼´
            }
            
            refreshQuote(); 
            saveState();
        });

        // --- æ ¸å¿ƒé‚è¼¯ï¼šç´€å¿µæ—¥è¨ˆç®— ---
        function updateNextEvent() {
            const now = new Date();
            now.setHours(0,0,0,0);
            const currentYear = now.getFullYear();

            // æ§‹å»ºæ‰€æœ‰ç›¸é—œæ—¥æœŸçš„åˆ—è¡¨ï¼ˆåŒ…å« "åœ¨ä¸€èµ·" ç´€å¿µæ—¥ å’Œ è‡ªå®šç¾©ç´€å¿µæ—¥ï¼‰
            let allEvents = [...appState.events];
            
            // åŠ å…¥ "åœ¨ä¸€èµ·" çš„å‘¨å¹´ç´€å¿µ
            allEvents.push({
                id: 'start-anniversary',
                name: "åœ¨ä¸€èµ·é€±å¹´ç´€å¿µ",
                date: appState.startDate
            });

            if (allEvents.length === 0) {
                document.getElementById('next-event-name').innerText = "é»æ“Šå³ä¸‹è§’æ·»åŠ ç´€å¿µæ—¥";
                return;
            }

            let minDiff = Infinity;
            let targetEvent = null;
            let targetDateDisplay = null;

            allEvents.forEach(evt => {
                const evtDate = new Date(evt.date);
                // å…ˆå‡è¨­ä»Šå¹´çš„ç´€å¿µæ—¥
                let nextDate = new Date(currentYear, evtDate.getMonth(), evtDate.getDate());
                
                // å¦‚æœä»Šå¹´çš„å·²ç¶“éäº†ï¼Œå°±ç®—æ˜å¹´çš„
                if (nextDate < now) {
                    nextDate = new Date(currentYear + 1, evtDate.getMonth(), evtDate.getDate());
                }

                const diff = (nextDate - now) / ONE_DAY;

                if (diff < minDiff) {
                    minDiff = diff;
                    targetEvent = evt;
                    targetDateDisplay = nextDate;
                }
            });

            // æ›´æ–° UI
            if (targetEvent) {
                const originalDate = new Date(targetEvent.date);
                // è¨ˆç®—å¾é‚£å¤©åˆ°ä»Šå¤©å·²ç¶“éäº†å¤šå°‘å¤© (ç´¯ç©ç¸½å¤©æ•¸)
                const totalDiff = Math.floor((now - originalDate) / ONE_DAY);
                
                document.getElementById('next-event-name').innerText = targetEvent.name;
                document.getElementById('next-event-days').innerText = Math.ceil(minDiff); // é‚„æœ‰å¤šå°‘å¤©
                document.getElementById('next-event-countdown').innerText = Math.ceil(minDiff);
                
                // é¡¯ç¤ºç›®æ¨™æ—¥æœŸ (MM-DD)
                const m = targetDateDisplay.getMonth() + 1;
                const d = targetDateDisplay.getDate();
                document.getElementById('next-event-date').innerText = `${m}æœˆ${d}æ—¥`;
            }
        }

        // --- æ¨¡æ…‹æ¡†èˆ‡åˆ—è¡¨ç®¡ç† ---
        function openSettings() {
            document.getElementById('input-name1').value = appState.name1;
            document.getElementById('input-name2').value = appState.name2;
            document.getElementById('input-start-date').value = appState.startDate;
            document.getElementById('input-symbol').value = appState.symbol;
            document.getElementById('settings-modal').style.display = 'block';
        }

        function saveSettings() {
            appState.name1 = document.getElementById('input-name1').value || "è¦ªæ„›çš„";
            appState.name2 = document.getElementById('input-name2').value || "å¯¶å¯¶";
            appState.startDate = document.getElementById('input-start-date').value || new Date().toISOString().split('T')[0];
            appState.symbol = document.getElementById('input-symbol').value;
            
            saveState();
            updateMainTimer();
            updateNextEvent(); // å› ç‚ºèµ·å§‹æ—¥è®Šäº†
            closeModal('settings-modal');
        }

        function openEventList() {
            renderEventList();
            document.getElementById('event-list-modal').style.display = 'block';
        }

        function addEvent() {
            const name = document.getElementById('new-event-name').value;
            const date = document.getElementById('new-event-date').value;
            if (!name || !date) return alert("è«‹å¡«å¯«å®Œæ•´ä¿¡æ¯");

            appState.events.push({
                id: Date.now(),
                name: name,
                date: date
            });
            
            // æ¸…ç©ºè¼¸å…¥
            document.getElementById('new-event-name').value = '';
            document.getElementById('new-event-date').value = '';

            saveState();
            renderEventList();
            updateNextEvent();
        }

        function deleteEvent(id) {
            if(confirm("ç¢ºå®šè¦åˆªé™¤é€™å€‹ç´€å¿µæ—¥å—ï¼Ÿ")) {
                appState.events = appState.events.filter(e => e.id !== id);
                saveState();
                renderEventList();
                updateNextEvent();
            }
        }

        function renderEventList() {
            const container = document.getElementById('events-container');
            container.innerHTML = '';
            
            // æ’åºï¼šæ—¥æœŸè¿‘çš„åœ¨ä¸Šé¢ (é¡¯ç¤ºåŸæ—¥æœŸ)
            // é€™è£¡ç°¡å–®åˆ—å‡ºæ‰€æœ‰
            if (appState.events.length === 0) {
                container.innerHTML = '<div style="text-align:center;color:#ccc;padding:10px;">é‚„æ²’æœ‰æ·»åŠ é¡å¤–çš„ç´€å¿µæ—¥å“¦</div>';
                return;
            }

            appState.events.forEach(evt => {
                const div = document.createElement('div');
                div.className = 'event-list-item';
                div.innerHTML = `
                    <div>
                        <strong>${evt.name}</strong><br>
                        <span style="font-size:0.8rem;color:#888;">${evt.date}</span>
                    </div>
                    <div class="delete-btn" onclick="deleteEvent(${evt.id})">âœ–</div>
                `;
                container.appendChild(div);
            });
        }

        function closeModal(id) {
            document.getElementById(id).style.display = 'none';
        }

        // é»æ“ŠèƒŒæ™¯é—œé–‰æ¨¡æ…‹æ¡†
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = "none";
            }
        }

        // --- è¦–è¦ºç‰¹æ•ˆ (Canvas æ°´å¢¨/é¼ æ¨™è»Œè·¡) ---
        const canvas = document.getElementById('canvas-bg');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 20 + 10;
                this.speedX = Math.random() * 1 - 0.5;
                this.speedY = Math.random() * 1 - 0.5;
                // ç²‰è‰²/æ°´å¢¨è‰²éš¨æ©Ÿ
                const colors = ['rgba(238, 184, 195, ', 'rgba(94, 75, 82, '];
                this.colorBase = colors[Math.floor(Math.random() * colors.length)];
                this.opacity = 0.6;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.size > 0.2) this.size -= 0.1;
                this.opacity -= 0.005;
            }
            draw() {
                ctx.fillStyle = this.colorBase + this.opacity + ')';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.filter = 'blur(4px)'; // æ°´å¢¨æšˆæŸ“æ„Ÿ
                ctx.fill();
                ctx.filter = 'none';
            }
        }

        function handleInput(x, y) {
            for (let i = 0; i < 2; i++) {
                particles.push(new Particle(x, y));
            }
        }

        window.addEventListener('mousemove', (e) => handleInput(e.x, e.y));
        window.addEventListener('touchmove', (e) => handleInput(e.touches[0].clientX, e.touches[0].clientY));

        function animateBg() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ç¹ªè£½ä¸€äº›éœæ…‹çš„èƒŒæ™¯æšˆæŸ“
            /* å¯¦éš›å°ˆæ¡ˆä¸­å¯ç”¨æ›´å¾©é›œçš„å™ªè²ç®—æ³•ï¼Œé€™è£¡ç”¨ç°¡å–®çš„å¤§åœ“æ¨¡æ“¬æ°´å¢¨èƒŒæ™¯ */
            /* ç‚ºäº†æ€§èƒ½å’Œç°¡æ½”ï¼Œé€™è£¡åªè™•ç†å‹•æ…‹ç²’å­ */

            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                if (particles[i].size <= 0.2 || particles[i].opacity <= 0) {
                    particles.splice(i, 1);
                    i--;
                }
            }
            requestAnimationFrame(animateBg);
        }
        animateBg();


        // --- å•Ÿå‹• ---
        window.onload = () => {
            loadState();
            updateMainTimer();
            refreshQuote();
            updateNextEvent();
            
            // è¨­ç½®é–‹é—œç‹€æ…‹
            if(appState.isNaughtyMode) {
                document.getElementById('mode-toggle').classList.add('active');
            }
        };

    </script>
</body>
</html>
